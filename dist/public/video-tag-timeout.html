<html>
  <head>
    <meta charset="utf-8">
    <style>
      body {
        padding: 0;
        margin: 0;
      }
      .container {
        position: relative;
        height: 100%;
        width: 100%;
        background: black;
        text-align: center;
      }
      #trackRenderer {
        width: 640px;
        height: 360px;
        background-color: rgba(53, 50, 50, 0.87);
        margin: 0 auto;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <video controls controls crossorigin=anonymous>
        <source src="http://pmd205470tn.download.theplatform.com.edgesuite.net/Jeremy_LaCivita_(VMS)/654/339/developerStories-en.mp4" type='video/webm; codecs="vp8, vorbis"' />
        <source src="http://pmd205470tn.download.theplatform.com.edgesuite.net/Jeremy_LaCivita_(VMS)/654/339/developerStories-en.webm" type='video/mp4;' />
        <track kind="subtitles" label="English subtitles" src="http://pmd205470tn.download.theplatform.com.edgesuite.net/Jeremy_LaCivita_(VMS)/654/339/subs-en.vtt" srclang="en" default></track>
      </video>
      <div id="trackRenderer"></div>
    </div>
    <script type="text/javascript" src="hls.js"></script>
    <script type="text/javascript" src="texttrackrenderer.js"></script>
    <script type="text/javascript">
      // Instantiates TextTrackRenderer
      const ttr = new TextTrackRenderer;

      if(Hls.isSupported()) {
        var video = document.querySelector('video')
        var hls = new Hls()
        hls.loadSource('http://cdn3.videos.bloomberg.com/btv/us/master.m3u8')
        hls.attachMedia(video)
        hls.on(Hls.Events.MANIFEST_PARSED,function(event, data) {
          video.play()
          console.log(data)
        })
      }

      // User chooses div to pass to attach handler
      let d = document.getElementById('trackRenderer');
      ttr.attach(d);

      // Adds TextTrack
      let vt = document.querySelector('video').textTracks[0]
      setTimeout(function() {
        ttr.addTextTrack(vt)
      }, 1000)
    </script>
  </body>
</html>
